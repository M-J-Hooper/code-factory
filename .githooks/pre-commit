#!/usr/bin/env bash
set -euo pipefail

# Ensure OpenCode sync is up-to-date before committing.
if ! make check-opencode-sync; then
    echo "" >&2
    echo "Pre-commit hook failed: OpenCode sync is stale." >&2
    echo "Run './sync-opencode.sh' or 'make install' to fix." >&2
    exit 1
fi
